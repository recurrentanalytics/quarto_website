---
title: ERA5 rainfall – quick look
format:
  html:
    toc: true
jupyter: ra
execute:
  echo: true
  warning: true
  error: true
---

> Minimal example using `xarray` + `cfgrib` (local GRIB files).
> Replace `PATH_TO_GRIB` with your local file; this page won’t fetch data.

<!-- blank line is important so the code block is top-level -->

```{python}
#| fig-height: 5
#| fig-width: 10

# If matplotlib backend issues occur on macOS, uncomment the next 2 lines:
# import matplotlib
# matplotlib.use("Agg")

import matplotlib.pyplot as plt
import numpy as np
# import xarray as xr  # uncomment when using local ERA5

# --- ERA5 read (uncomment when you have a local GRIB) ---
# path = "PATH_TO_GRIB/era5_tp_daily_2020-01-01.grib"
# ds = xr.open_dataset(path, engine="cfgrib")
# data = ds['tp'][0].values
# lat = ds.latitude.values
# lon = ds.longitude.values

# --- synthetic fallback so the page always renders ---
lat = np.linspace(-60, 60, 121)
lon = np.linspace(-180, 180, 361)
data = np.random.gamma(2, 1, (len(lat), len(lon)))

plt.figure()
plt.imshow(
    data,
    extent=[lon.min(), lon.max(), lat.min(), lat.max()],
    origin="lower"
)
plt.title("ERA5 total precipitation — mock plot (replace with ds['tp'][0])")
plt.xlabel("longitude"); plt.ylabel("latitude")
plt.show()
